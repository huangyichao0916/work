{"version":3,"sources":["components/course/lesson/studyPath/studyPathItem/StudyPathItem.tsx","components/course/lesson/studyPath/StudyPath.tsx","components/course/lesson/courseDirectionItem/CourseDirectionItem.tsx","pages/course/lesson/courseDirection/index.tsx","components/course/lesson/allCoursesItem/AllCoursesItem.tsx","pages/course/lesson/allCourses/index.tsx","baseUI/MyBScroll/index.tsx","pages/course/lesson/index.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/classnames/index.js"],"names":["StudyPathItem","this","props","name","icon","product_count","className","src","alt","PureComponent","StudyPath","state","data","axios","get","then","res","setState","finalStudyPathItem","map","i","index","id","key","CourseDirectionItem","title","myClassname","React","memo","items","useMemo","myItems","item","isEvenNumber","classnames","courseDirectionItem","evenNumberItem","AllCoursesItem","authorName","authorDesc","avatar","articleCount","totalPeopleLearn","priceMarket","priceSale","haveLearned","handleBuyLesson","onClick","connect","dispatch","price","payload","lessonBuyLessonActionCreator","courseLessonDataSource","debounce","func","delay","timer","args","clearTimeout","setTimeout","apply","ScrollContainer","styled","div","Scroll","useState","bScroll","setBScroll","scrollContaninerRef","useRef","direction","click","refresh","bounceTop","bounceBottom","pullUp","console","log","pullDown","onScroll","pullUpDebounce","pullDownDebounce","useEffect","scroll","BScroll","current","scrollX","scrollY","probeType","bounce","top","bottom","on","off","handlePullUp","y","maxScrollY","handlePullDown","pos","ref","children","getIn","toJS","addDataToCourseLesson","addDataToCourseLessonActionCreator","refreshCourseLesson","refreshCourseLessonActionCreator","Len","length","offset","setOffset","loadCourseLesson","useCallback","Error","catch","err","reloadCourseLesson","_slicedToArray","arr","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","unsupportedIterableToArray","TypeError","hasOwn","hasOwnProperty","classNames","classes","arguments","arg","argType","inner","call","join","module","exports","default"],"mappings":"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","file":"static/js/6.f722676f.chunk.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport './studyPathItem.styl';\n\ninterface Props {\n    name: string;\n    icon: string;\n    product_count: number;\n}\nclass StudyPathItem extends PureComponent<Props> {\n    render() {\n        const { name, icon, product_count } = this.props;\n        return (\n            <div className=\"studyPathItem\">\n                <div className=\"description\">\n                    <div className=\"type\">\n                        {name}\n                    </div>\n                    <div className=\"totalLessons\">\n                        共有{product_count}门课程\n                    </div>\n                </div>\n                <div className=\"img\">\n                    <img src={icon} alt=\"\" />\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default StudyPathItem;","import React, { PureComponent } from 'react';\nimport './studyPath.styl';\nimport StudyPathItem from './studyPathItem/StudyPathItem';\nimport axios from 'axios'\n\ninterface Item {\n    id: number;\n    name: string;\n    icon: string;\n    product_count: number;\n    [otherProps: string]: any;\n}\ninterface State {\n    data: Item[];\n}\nclass StudyPath extends PureComponent<any, State> {\n    state = {\n        data: [],\n    }\n    componentDidMount() {\n        axios.get<Item[]>('/data/studyPath.json')\n            .then(res => this.setState({\n                data: res.data,\n            }))\n    }\n    render() {\n        const { data } = this.state;\n        const finalStudyPathItem: Array<JSX.Element> = data.map((i: Item, index: number) => {\n            const { id, name, icon, product_count } = i;\n            return (\n                <StudyPathItem key={id} name={name} product_count={product_count} icon={icon} />\n            )\n        })\n        return (\n            <div className=\"studyPath\">\n                <div className=\"top\">\n                    <div className=\"left\">\n                        学习路径\n                    </div>\n                    <div className=\"right\">\n                        查看全部\n                    </div>\n                </div>\n                <div className=\"studyPathItemWrapper\">\n                    <div className=\"content\">\n                        {finalStudyPathItem}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default StudyPath;","import React,{FC} from 'react';\nimport './courseDirectionItem.styl';\n\ninterface Props{\n    title:string;\n    myClassname:string;\n}\nconst CourseDirectionItem:FC<Props> = props => {\n    const {title,myClassname} = props;\n    return (\n        <div className={myClassname}>\n            {title}\n        </div>\n    )\n}\n\nexport default CourseDirectionItem;","import React,{useMemo,FC} from 'react';\nimport './courseDirection.styl';\nimport CourseDirectionItem from '@/components/course/lesson/courseDirectionItem/CourseDirectionItem';\nimport classnames from 'classnames';\n\n\nconst CourseDirection:FC<any> = () => {\n    const items:Array<string> = useMemo(() => (\n        ['计算机专业课', '后端&架构', '前端&移动', '产品&运营', '人工智能&大数据', '运维&测试', '管理&效率', '职场软技能', '面试专场']\n    ),[]);\n    // console.log(items);\n    const myItems:Array<JSX.Element> = useMemo(() => (\n        items.map((item:string, index:number) => {\n            let isEvenNumber = index % 2 === 0 ? false : true;\n            return (\n                <CourseDirectionItem\n                    key={index}\n                    title={item}\n                    myClassname={classnames({\n                        courseDirectionItem: true,\n                        evenNumberItem: isEvenNumber,\n                    })}\n                />\n            )\n        })\n    ),[])\n    return (\n        <div className=\"courseDirection\">\n            <div className=\"courseDirectionTop\">\n                <div className=\"left\">\n                    课程方向\n                </div>\n                <div className=\"right\">\n                    查看全部\n                </div>\n            </div>\n            <div className=\"courseDirectionItemWrapper\">\n                {\n                    myItems\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default React.memo(CourseDirection);","import React,{FC} from 'react';\nimport './allCoursesItem.styl';\n\nimport {\n    StudyItemInt,\n    CourseLessonItem\n} from '@/store/types'\n\ninterface Props extends CourseLessonItem{\n    index:number\n    handleBuyLesson:(price: number, index: number, payload:StudyItemInt) => void;\n}\nconst AllCoursesItem:FC<Props> = props => {\n    const {\n        title,\n        authorName,\n        authorDesc,\n        avatar,\n        articleCount,\n        totalPeopleLearn,\n        priceMarket,\n        priceSale,\n        haveLearned,\n\n        index,\n        handleBuyLesson,\n    } = props;\n    return (\n        <div className=\"practiceCamp-item2\">\n            {/* <div className=\"practiceCamp-item-img\">\n                <LazyLoad>\n                    <img src={avatar} alt=\"图片不见了\" />\n                </LazyLoad>\n            </div> */}\n            <div className=\"practiceCamp-item-img\">\n                <img src={avatar} alt=\"图片不见了\" />\n            </div>\n            <div className=\"practiceCamp-item-detail\">\n                <div className=\"practiceCamp-item-name\">{title}</div>\n                <div className=\"practiceCamp-item-teacher\">\n                    <div className=\"practiceCamp-item-teacher-name\">{authorName}</div>\n                    <div className=\"practiceCamp-item-teacher-desc\">{authorDesc}</div>\n                </div>\n                <div className=\"practiceCamp-item-time\">{articleCount}讲｜{totalPeopleLearn}人已学习</div>\n                <div className=\"price-and-join\">\n                    <div className=\"practiceCamp-new-first-indent\">新人首单</div>\n                    <div className=\"practiceCamp-item-price\">￥{priceSale}</div>\n                    <div className=\"practiceCamp-item-oldprice\">￥{priceMarket}</div>\n                    {!haveLearned && <button onClick={() => {\n                        handleBuyLesson(priceSale,index,{\n                            title,\n                            authorName,\n                            authorDesc,\n                        });\n                    }}>购买</button>}\n                    {haveLearned && <button className=\"hasBeenPurchased\">已购买</button>}\n                </div>\n            </div>\n        </div>\n    )\n}\n\n\nexport default AllCoursesItem;","import React, { FC } from 'react';\nimport './allCourses.styl';\nimport AllCoursesItem from '@/components/course/lesson/allCoursesItem/AllCoursesItem';\n\nimport { \n    CourseLessonItem,\n    RootState,\n    StudyItemInt,\n } from '@/store/types'\nimport { lessonBuyLessonActionCreator, ActionType } from '@/store/action'\n\nimport { connect } from 'react-redux'\nimport { ThunkDispatch } from 'redux-thunk';\n\ninterface Props {\n    courseLessonDataSource: Array<CourseLessonItem>\n    handleBuyLesson: (price: number, index: number, payload: StudyItemInt) => void;\n}\nconst AllCourses: FC<Props> = props => {\n    const { courseLessonDataSource, handleBuyLesson } = props;\n    const items: Array<JSX.Element> = courseLessonDataSource.map((item: CourseLessonItem, index: number) => {\n        return (\n            <AllCoursesItem\n                {...item}\n\n                index={index}\n                key={item.id}\n                handleBuyLesson={handleBuyLesson}\n            />\n        )\n    })\n    return (\n        <div className=\"allCourses\">\n            <div className=\"allCoursesTop\">\n                全部课程\n            </div>\n            <div className=\"allCoursesNavBar\">\n                <div className=\"left\">\n                    课程形式\n                </div>\n                <div className=\"middle\">\n                    订阅状态\n                </div>\n                <div className=\"right\">\n                    上新\n                </div>\n            </div>\n            <div className=\"allCoursesItemWrapper\">\n                {\n                    items\n                }\n            </div>\n        </div>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n\n    }\n}\nconst mapDispatchToProps = (dispatch: ThunkDispatch<RootState, any, ActionType>) => {\n    return {\n        handleBuyLesson: (price: number, index: number, payload: StudyItemInt) => {\n            dispatch(lessonBuyLessonActionCreator(price, index, payload));\n        }\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AllCourses);","import React, { useState, useEffect, useRef, useMemo, FC } from \"react\"\nimport BScroll from \"better-scroll\"\nimport styled from 'styled-components';\n\nconst debounce: Function = (func: Function, delay: number):Function => {\n  let timer: null | number = null;\n  return function (...args: any[]) {\n    if (timer) {\n      clearTimeout(timer);\n    }\n    timer = setTimeout(() => {\n      func.apply(this, args);\n      clearTimeout(timer);\n    }, delay);\n  };\n};\n\n// const LoadingComp:FC<any> = (props) => {\n//   return (\n//     <div className=\"loading-component\">\n//       loading\n//     </div>\n//   )\n// }\n\nconst ScrollContainer = styled.div`\n  width: 100%;\n  height: 60vh;\n`\n\ninterface Pos{\n  x:number;\n  y:number;\n}\n\ninterface Props {\n  direction?: 'vertical' | 'horizental';\n  click?: boolean;\n  refresh?: boolean;\n  bounceTop?: boolean;\n  bounceBottom?: boolean;\n\n  onScroll?: (...args:any[]) => void;\n  pullUp?: (...args:any[]) => void;\n  pullDown?: (...args:any[]) => void;\n}\nconst Scroll: FC<Props> = (props) => {\n  const [bScroll, setBScroll] = useState<BScroll | null>(null);\n\n  const scrollContaninerRef = useRef();\n\n  const {\n    direction = 'vertical',\n    click = true,\n    refresh = true,\n    bounceTop = true,\n    bounceBottom = true,\n  } = props;\n\n  const {\n    pullUp = () => { console.log('拉到了底部') },\n    pullDown = () => { console.log('拉到了顶部') },\n    onScroll,\n  } = props;\n\n  let pullUpDebounce:Function = useMemo(() => {\n    return debounce(pullUp, 500)\n  }, [pullUp]);\n\n  let pullDownDebounce:Function = useMemo(() => {\n    return debounce(pullDown, 500)\n  }, [pullDown]);\n\n  useEffect(() => {\n    const scroll:BScroll = new BScroll(scrollContaninerRef.current, {\n      scrollX: direction === \"horizental\",\n      scrollY: direction === \"vertical\",\n      probeType: 3,\n      click: click,\n      bounce: {\n        top: bounceTop,\n        bottom: bounceBottom\n      }\n    });\n\n    setBScroll(scroll);\n    return () => {\n      setBScroll(null);\n    }\n  }, []);\n\n  useEffect(() => {//在滚动的时候触发事件\n    if (!bScroll || !onScroll) return;\n\n    bScroll.on('scroll', onScroll)\n    return () => {\n      bScroll.off('scroll', onScroll);\n    }\n  }, [onScroll, bScroll]);\n\n  useEffect(() => {//判断是否滑动到了底部\n    if (!bScroll || !pullUp) return;\n    const handlePullUp = () => {\n      if (bScroll.y <= bScroll.maxScrollY + 100) {\n        pullUpDebounce();\n      }\n    };\n    bScroll.on('touchEnd', handlePullUp);\n    return () => {\n      bScroll.off('touchEnd', handlePullUp);\n    }\n  }, [pullUp, pullUpDebounce, bScroll]);\n\n  useEffect(() => {//判断用户的下拉动作\n    if (!bScroll || !pullDown) return;\n    const handlePullDown = (pos:Pos) => {\n      if (pos.y > 50) {\n        pullDownDebounce();\n      }\n    };\n    bScroll.on('touchEnd', handlePullDown);\n    return () => {\n      bScroll.off('touchEnd', handlePullDown);\n    }\n  }, [pullDown, pullDownDebounce, bScroll]);\n\n\n  useEffect(() => {\n    if (refresh && bScroll) {\n      bScroll.refresh();\n    }\n  });\n\n  return (\n    <ScrollContainer ref={scrollContaninerRef}>\n      {props.children}\n    </ScrollContainer>\n  );\n}\n\nexport default Scroll;","import React, { useEffect, FC, useCallback, Dispatch, useState } from 'react';\nimport './lesson.styl';\nimport axios from 'axios';\nimport '@/mock/course-lesson-data';\n\nimport StudyPath from '@/components/course/lesson/studyPath/StudyPath';\nimport CourseDirection from './courseDirection';\nimport AllCourses from './allCourses';\nimport BScroll from '@/baseUI/MyBScroll'\n\nimport {\n    addDataToCourseLessonActionCreator,\n    refreshCourseLessonActionCreator,\n    AddDataToCourseLessonAction,\n    RefreshCourseLessonAction,\n} from '@/store/action';\nimport { \n    CourseLessonItem,\n } from '@/store/types';\n \n\nimport { connect } from 'react-redux';\n\n\n\ninterface Props {\n    addDataToCourseLesson: (...args: any[]) => any;\n    refreshCourseLesson: (...args: any[]) => any;\n    courseLessonDataSource: Array<CourseLessonItem>;\n}\n\nconst Lesson: FC<Props> = (props) => {\n    const { courseLessonDataSource, addDataToCourseLesson, refreshCourseLesson } = props;\n    const Len: number = courseLessonDataSource.length;\n    const [offset, setOffset] = useState<number>(0)\n    // console.log('offset='+offset)\n\n    const loadCourseLesson = useCallback(\n        (offset: number) => {\n            axios.get(`/mock/course/lesson?offset=${offset}`)\n                .then(res => {\n                    if (res.data) {\n                        setOffset(res.data.offset)\n                        addDataToCourseLesson(res.data.data)\n                        console.log('load success')\n                    }\n                    else {\n                        throw new Error(\"所有数据都展示完毕，无数据\");\n                    }\n                })\n                .catch(err => console.log(err))\n        },\n        [],\n    )\n    const reloadCourseLesson = useCallback(\n\n        (offset: number) => {\n            axios.get(`/mock/course/lesson?offset=${offset}`)\n                .then(res => {\n                    if (res.data) {\n                        setOffset(res.data.offset)\n                        refreshCourseLesson(res.data.data)\n                        console.log('refresh success')\n                    }\n                    else {\n                        throw new Error(\"所有数据都展示完毕，无数据\");\n                    }\n                })\n                .catch(err => console.log(err))\n        },\n        [],\n    )\n\n    useEffect(() => {\n        if (Len > 0) {\n            return;\n        }\n        loadCourseLesson(0)\n    }, [])\n\n\n    return (\n        <BScroll\n            pullUp={() => loadCourseLesson(offset)}\n            pullDown={() => reloadCourseLesson(offset)}\n        >\n            <div className=\"contentLesson\">\n                <StudyPath />\n                <CourseDirection />\n                <AllCourses courseLessonDataSource={courseLessonDataSource} />\n            </div>\n        </BScroll>\n    );\n}\n\nconst mapStateToProps = state => {\n    return {\n        courseLessonDataSource: state.getIn(['courseLessonDataSource']).toJS(),\n    }\n}\nconst mapDispatchToProps = (dispatch: Dispatch<AddDataToCourseLessonAction | RefreshCourseLessonAction>) => {\n    return {\n        addDataToCourseLesson: (payload: Array<CourseLessonItem>) => {\n            dispatch(addDataToCourseLessonActionCreator(payload));\n        },\n        refreshCourseLesson: (payload: Array<CourseLessonItem>) => {\n            dispatch(refreshCourseLessonActionCreator(payload));\n        }\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Lesson);","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n"],"sourceRoot":""}