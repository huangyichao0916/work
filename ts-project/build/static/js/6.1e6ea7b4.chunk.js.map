{"version":3,"sources":["components/course/lesson/studyPath/studyPathItem/StudyPathItem.jsx","components/course/lesson/studyPath/StudyPath.jsx","components/course/lesson/courseDirectionItem/CourseDirectionItem.jsx","pages/course/lesson/courseDirection/CourseDirection.tsx","components/course/lesson/allCoursesItem/AllCoursesItem.tsx","pages/course/lesson/allCourses/AllCourses.tsx","pages/course/lesson/Lessons.tsx"],"names":["StudyPathItem","this","props","type","total","className","src","alt","Component","StudyPath","studyPathItemData","courseLessonDataSource","reduce","pre","cur","finalStudyPathItem","Object","keys","map","i","index","key","CourseDirectionItem","title","myClassname","React","memo","items","useMemo","myItems","item","isEvenNumber","classnames","courseDirectionItem","evenNumberItem","AllCoursesItem","img","lessonName","teacherName","teacherDesc","month","day","price","oldprice","isPurchased","id","handleBuyLesson","onClick","connect","state","dispatch","payload","lessonBuyLessonActionCreator","desc","name","Lesson","BetterScroll","use","Pullup","scrollY","click","scrollX","pullUpLoad","on","console","log","length","handlePullDown","axios","get","then","res","data","courses","addDataToCourseLesson","getIn","toJS","addDataToCourseLessonActionCreator","courseLessonPullDownActionCreator"],"mappings":"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","file":"static/js/6.1e6ea7b4.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport './studyPathItem.styl';\n\nclass StudyPathItem extends Component {\n    render() { \n        const {type , total} = this.props;\n        return (\n            <div className=\"studyPathItem\">\n                <div className=\"description\">\n                    <div className=\"type\">\n                        {type}\n                    </div>\n                    <div className=\"totalLessons\">\n                        共有{total}门课程\n                    </div>\n                </div>\n                <div className=\"img\">\n                    <img src=\"https://static001.geekbang.org/resource/image/50/b6/50cac4f8a8e9b600636c0890967113b6.jpg\" alt=\"\"/>\n                </div>\n            </div>\n        );\n    }\n}\n \nexport default StudyPathItem;","import React, { Component } from 'react';\nimport './studyPath.styl';\nimport StudyPathItem from './studyPathItem/StudyPathItem';\n// import BScroll from 'better-scroll';\n\nclass StudyPath extends Component {\n    render() {\n        // console.log('studypatch重新渲染');\n        const { courseLessonDataSource } = this.props;\n        const studyPathItemData = courseLessonDataSource.reduce((pre, cur) => {\n            let type = cur.type;\n            if (!pre[type]) {\n                pre[type] = 1;\n            } else {\n                pre[type]++;\n            }\n            return pre;\n        }, {})\n        // console.log(studyPathItemData);//object\n        const finalStudyPathItem = Object.keys(studyPathItemData).map((i,index) => {\n            return (\n                <StudyPathItem key={index} type={i} total={studyPathItemData[i]}/>\n            )\n        })\n        return (\n            <div className=\"studyPath\">\n                <div className=\"top\">\n                    <div className=\"left\">\n                        学习路径\n                    </div>\n                    <div className=\"right\">\n                        查看全部\n                    </div>\n                </div>\n                <div className=\"studyPathItemWrapper\">\n                    <div className=\"content\">\n                        {finalStudyPathItem}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default StudyPath;","import React from 'react';\nimport './courseDirectionItem.styl';\n\nconst CourseDirectionItem = props => {\n    const {title,myClassname} = props;\n    return (\n        <div className={myClassname}>\n            {title}\n        </div>\n    )\n}\n\nexport default CourseDirectionItem;","import React,{useMemo,FC} from 'react';\nimport './courseDirection.styl';\nimport CourseDirectionItem from '@/components/course/lesson/courseDirectionItem/CourseDirectionItem';\nimport classnames from 'classnames';\n\n\nconst CourseDirection:FC<any> = () => {\n    const items:Array<string> = useMemo(() => (\n        ['计算机专业课', '后端&架构', '前端&移动', '产品&运营', '人工智能&大数据', '运维&测试', '管理&效率', '职场软技能', '面试专场']\n    ),[]);\n    // console.log(items);\n    const myItems:Array<JSX.Element> = useMemo(() => (\n        items.map((item:string, index:number) => {\n            let isEvenNumber = index % 2 === 0 ? false : true;\n            return (\n                <CourseDirectionItem\n                    key={index}\n                    title={item}\n                    myClassname={classnames({\n                        courseDirectionItem: true,\n                        evenNumberItem: isEvenNumber,\n                    })}\n                />\n            )\n        })\n    ),[])\n    return (\n        <div className=\"courseDirection\">\n            <div className=\"courseDirectionTop\">\n                <div className=\"left\">\n                    课程方向\n                </div>\n                <div className=\"right\">\n                    查看全部\n                </div>\n            </div>\n            <div className=\"courseDirectionItemWrapper\">\n                {\n                    myItems\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default React.memo(CourseDirection);","import React,{FC} from 'react';\nimport './allCoursesItem.styl';\nimport LazyLoad from 'react-lazyload';\nimport {Payload} from '@/pages/course/lesson/allCourses/AllCourses'\n\ninterface Props{\n    day: number;\n    teacherDesc: string;\n    img: string;\n    isPurchased: boolean;\n    month: number;\n    teacherName: string;\n    oldprice: number;\n    price: number;\n    lessonName: string;\n    // type: string;\n    id:number;\n\n    handleBuyLesson:(price: number, id: number, payload:Payload) => void;\n}\nconst AllCoursesItem:FC<Props> = props => {\n    const {\n        img,\n        lessonName,\n        teacherName,\n        teacherDesc,\n        month,\n        day,\n        price,\n        oldprice,\n        isPurchased,\n        id,\n\n        handleBuyLesson,\n    } = props;\n    return (\n        <div className=\"practiceCamp-item\">\n            <div className=\"practiceCamp-item-img\">\n                <LazyLoad>\n                    <img src={img} alt=\"图片不见了\" />\n                </LazyLoad>\n            </div>\n            <div className=\"practiceCamp-item-detail\">\n                <div className=\"practiceCamp-item-name\">{lessonName}</div>\n                <div className=\"practiceCamp-item-teacher\">\n                    <div className=\"practiceCamp-item-teacher-name\">{teacherName}</div>\n                    <div className=\"practiceCamp-item-teacher-desc\">{teacherDesc}</div>\n                </div>\n                <div className=\"practiceCamp-item-time\">{month}讲｜{day}人已学习</div>\n                <div className=\"price-and-join\">\n                    <div className=\"practiceCamp-new-first-indent\">新人首单</div>\n                    <div className=\"practiceCamp-item-price\">￥{price}</div>\n                    <div className=\"practiceCamp-item-oldprice\">￥{oldprice}</div>\n                    {!isPurchased && <button onClick={() => {\n                        handleBuyLesson(price,id,{\n                            lessonName,\n                            teacherName,\n                            teacherDesc,\n                        });\n                    }}>购买</button>}\n                    {isPurchased && <button className=\"hasBeenPurchased\">已购买</button>}\n                </div>\n            </div>\n        </div>\n    )\n}\n\n\nexport default AllCoursesItem;","import React, { FC } from 'react';\nimport './allCourses.styl';\nimport AllCoursesItem from '@/components/course/lesson/allCoursesItem/AllCoursesItem';\nimport { CourseLessonItem } from '@/store/types'\nimport { connect } from 'react-redux'\nimport { lessonBuyLessonActionCreator, ActionType } from '@/store/action'\nimport { RootState } from '@/store/types'\nimport { ThunkDispatch } from 'redux-thunk';\n\nexport interface Payload {\n    lessonName:string\n    teacherName:string\n    teacherDesc:string;\n}\ninterface Props {\n    courseLessonDataSource: Array<CourseLessonItem>\n    handleBuyLesson: (price: number, id: number, payload:Payload) => void;\n}\nconst AllCourses: FC<Props> = props => {\n    const { courseLessonDataSource, handleBuyLesson } = props;\n    // console.log(courseLessonDataSource);\n    const items: Array<JSX.Element> = courseLessonDataSource.map((item: CourseLessonItem, index: number) => {\n        const { img, title, desc, month, day, price, oldprice, isPurchased, name } = item;\n        return (\n            <AllCoursesItem\n                img={img}\n                key={index}\n                id={index}\n                lessonName={title}\n                teacherName={name}\n                teacherDesc={desc}\n                month={month}\n                day={day}\n                price={price}\n                oldprice={oldprice}\n                isPurchased={isPurchased}\n\n                handleBuyLesson={handleBuyLesson}\n            />\n        )\n    })\n    return (\n        <div className=\"allCourses\">\n            <div className=\"allCoursesTop\">\n                全部课程\n            </div>\n            <div className=\"allCoursesNavBar\">\n                <div className=\"left\">\n                    课程形式\n                </div>\n                <div className=\"middle\">\n                    订阅状态\n                </div>\n                <div className=\"right\">\n                    上新\n                </div>\n            </div>\n            <div className=\"allCoursesItemWrapper\">\n                {\n                    items\n                }\n            </div>\n        </div>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n\n    }\n}\nconst mapDispatchToProps = (dispatch: ThunkDispatch<RootState, any, ActionType>) => {\n    return {\n        handleBuyLesson: (price: number, id: number, payload:Payload) => {\n            dispatch(lessonBuyLessonActionCreator(price, id, payload));\n        }\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AllCourses);","import React, { Component } from 'react';\nimport StudyPath from '@/components/course/lesson/studyPath/StudyPath';\nimport './lesson.styl';\nimport axios from 'axios';\nimport '@/mock/course-lesson-data';\nimport { connect } from 'react-redux';\nimport { addDataToCourseLessonActionCreator, courseLessonPullDownActionCreator } from '@/store/action';\nimport CourseDirection from './courseDirection/CourseDirection';\nimport AllCourses from './allCourses/AllCourses';\n// import BScroll from 'better-scroll';\nimport Scroll from '@/components/Scroll/Scroll';\nimport { forceCheck } from 'react-lazyload';\nimport { CourseLessonItem } from '@/store/types'\nimport { ThunkDispatch } from 'redux-thunk';\nimport { RootState } from '@/store/types'\nimport { ActionType } from '@/store/action'\n// import BScroll from 'better-scroll'\nimport BetterScroll from '@better-scroll/core'\nimport Pullup from '@better-scroll/pull-up'\n\n\ninterface Props {\n    addDataToCourseLesson: Function;\n    handlePullDown: Function;\n    courseLessonDataSource: Array<CourseLessonItem>\n}\nclass Lesson extends Component<Props> {\n    componentDidMount() {\n        BetterScroll.use(Pullup)\n        const bs = new BetterScroll('.lesson', {\n            scrollY: true,\n            click:true,\n            scrollX: false,\n            pullUpLoad:true,\n        })\n        bs.on('pullingUp',() => {\n            console.log(`拉到底部了，再次请求数据，现在有${this.props.courseLessonDataSource.length + 10}条数据`)\n            this.props.handlePullDown();\n        })\n\n        if (this.props.courseLessonDataSource.length > 0) {\n            // console.log('courseLessonDataSource已经有数据，所以阻断了axios请求');\n            return;\n        }\n        console.log('请求courseLesson的数据');\n        axios.get('/mock/course/lesson')\n            .then(res => res.data.courses)\n            .then(res => this.props.addDataToCourseLesson(res));\n    }\n    render() {\n        // console.log('lesson重新渲染');\n        const { courseLessonDataSource } = this.props;\n        return (\n            <div className=\"lesson\">\n                {/* <Scroll\n                    direction={'vertical'}\n                    pullUp={handlePullDown}\n                    onScroll={forceCheck}\n                > */}\n                    <div className=\"content\">\n                        <StudyPath courseLessonDataSource={courseLessonDataSource} />\n                        <CourseDirection />\n                        <AllCourses courseLessonDataSource={courseLessonDataSource} />\n                    </div>\n                {/* </Scroll> */}\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        courseLessonDataSource: state.getIn(['courseLessonDataSource']).toJS(),\n    }\n}\nconst mapDispatchToProps = (dispatch: ThunkDispatch<RootState, any, ActionType>) => {\n    return {\n        addDataToCourseLesson: (payload: Array<CourseLessonItem>) => {\n            dispatch(addDataToCourseLessonActionCreator(payload));\n        },\n        handlePullDown: () => {\n            // console.log('123');\n            dispatch(courseLessonPullDownActionCreator());\n        }\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Lesson);"],"sourceRoot":""}